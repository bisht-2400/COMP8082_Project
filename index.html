<!DOCTYPE html>
<html>
  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="index_style.css" rel="stylesheet">
  <style>

  </style>
  </head>
  <body>

  <div class="header">
    <a href="#default" class="logo">Team 5</a>
    <div class="header-right">
      <a class="active" href="#home">Home</a>
      <a class="about" href="#about">About</a>
    </div>
    
  <div style="color: white; ">
    <h1>IT Job Board</h1>
    <p>Jobs not guaranteed</p>
  </div>
  </div>

  <div class="btn-group-wrap">
    <div class="btn-group" role="group" aria-label="Basic outlined example">
      <button type="button" class="btn btn-outline-primary btn-main">ALL</button>
      <button type="button" class="btn btn-outline-primary">JAVASCRIPT</button>
      <button type="button" class="btn btn-outline-primary">HTML</button>
      <button type="button" class="btn btn-outline-primary">CSS</button>
      <button type="button" class="btn btn-outline-primary">REACT</button>
      <button type="button" class="btn btn-outline-primary">RUBY</button>
      <button type="button" class="btn btn-outline-primary">RAILS</button>
      <button type="button" class="btn btn-outline-primary">REMOTE</button>
      <button type="button" class="btn btn-outline-primary">PHP</button>
      <button type="button" class="btn btn-outline-primary">PYTHON</button>
      <button type="button" class="btn btn-outline-primary">DJANGO</button>
      <button type="button" class="btn btn-outline-primary">CRYPTO</button>
      <button type="button" class="btn btn-outline-primary">WEB3</button>
      <button type="button" class="btn btn-outline-primary">BLOCKCHAIN</button>
    </div>

  </div>

  <nav class="navbar">
    <form class="form-inline">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <script>

    function createJobListing(listing) {
      let btn = document.createElement("button");
      btn.className = "collapsible";
      let imgSrc = "images/".concat(listing.employer, ".png")
      btn.innerHTML = "<img src='".concat(imgSrc, "' style = 'height: 48px; width: 48px'>", " ", listing.title);
      let div = document.createElement("div");
      div.innerHTML = "  <div class=\"content\">\n" +
              "    <h4>Responsibilities</h4>\n" +
              "    <h6>We what seek in a candidate:</h6>\n" +
              "    <ul>\n" +
              "      <li>Strong work ethic - when you say you will deliver something, you will deliver.</li>\n" +
              "      <li>Loves coding - We want people that love what they do.</li>\n" +
              "      <li>When replying, put 'Pineapple' in the subject line, so we know you read this whole posting</li>\n" +
              "      <li>Must be able to work from 8am - 6pm PST</li>\n" +
              "      <li>Must have a web cam to show your face when we do calls</li>\n" +
              "      <li>Must speak fluent English and/or fluent Spanish</li>\n" +
              "    </ul>\n" +
              "    <h4>Requirements</h4>\n" +
              "    <ul>\n" +
              "      <li>React Native - We need 1-2 React Native developers</li>\n" +
              "      <li>React / Node.js - We need 2-3 React / Node.js developers</li>\n" +
              "    </ul>\n" +
              "    <button type=\"button\" class=\"btn btn-outline-primary btn-main\">Apply Here</button>\n" +
              "  </div>"

      document.body.appendChild(div);
      document.body.appendChild(btn);
      return true;
    }

    function createUlList(root, content) {
      let contentArray = content.split(".")

      let ul = document.createElement('ul');
      let li;

      root.appendChild(ul);

      contentArray.forEach(function(item) {
        if (Array.isArray(item)) {
          createUlList(li, item);
          return;
        }

        li = document.createElement('li');
        li.appendChild(document.createTextNode(item));
        ul.appendChild(li);
      });
    }

    function addEventListeners() {
      let coll = document.getElementsByClassName("collapsible");
      let i;
      for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
          this.classList.toggle("active");
          let content = this.nextElementSibling;
          if (content.style.maxHeight){
            content.style.maxHeight = null;
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
          }
        });
      }
      console.log("I'm Done")
    }
    function appendAllJobListings() {
      fetch("./database.json")
              .then(response => {
                return response.json();
              })
              .then(jsondata => loopThroughListings(jsondata.job_listings));
    }
    function loopThroughListings(data) {
      for (let i = 0; i < data.length; i++) {
        createJobListing(data[i])
      }
    }
    appendAllJobListings();

  </script>


  </body>
</html>